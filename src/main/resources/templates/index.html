<!DOCTYPE html>
<html layout:decorate="~{common/base}" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns="http://www.w3.org/1999/html">

<div layout:fragment="content">
    <!-- Hero Section -->
    <section class="hero-section position-relative">
        <div class="hero-promo">
            <img th:src="@{/images/promo/promo1.png}"
                 alt="Promo image"
                 class="hero-image">
        </div>
        <div class="container position-relative">
            <div class="row min-vh-100 align-items-center">
                <div class="col-lg-6">
                    <div class="hero-content text-white">
                        <h1 class="display-4 fw-bold mb-4" th:text="#{main.hero.title}">
                            Эндуро приключения в горах
                        </h1>
                        <p class="lead mb-4" th:text="#{main.hero.subtitle}">
                            Испытайте адреналин на профессиональных мотоциклах с опытным гидом
                        </p>
                        <a th:href="@{/calendar}" class="btn btn-primary btn-lg">
                            <i class="fas fa-calendar-plus me-2"></i>
                            <span th:text="#{main.hero.cta}">Забронировать заезд</span>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Bikes Section -->
    <section id="bikes" class="py-5 bg-light">
        <div class="container">
            <div class="text-center mb-5">
                <h2 class="display-6 fw-bold" th:text="#{section.bikes.title}">Наши мотоциклы</h2>
                <p class="lead text-muted" th:text="#{section.bikes.subtitle}">Профессиональная техника для любого уровня</p>
            </div>
            <div class="swiper bikes-swiper">
                <div class="swiper-wrapper">
                    <div class="swiper-slide swiper-autoheight" th:each="bike : ${bikes}">
                        <div class="card flex h-100 shadow-sm hover-card">
                            <div class="card-img-top bike-image d-flex align-items-center justify-content-center">
                                <img th:if="${bike.photoPath != null}"
                                     th:src="@{${bike.photoPath}}"
                                     alt="Bike photo"
                                     class="img-fluid"
                                     style="max-height: 200px; object-fit: cover;">
                                <i th:unless="${bike.photoPath != null}"
                                   class="fas fa-motorcycle fa-3x text-white"></i>
                            </div>
                            <div class="card-body text-center">
                                <h5 class="card-title" th:text="${bike.brand + ' ' + bike.model}">модель</h5>
                                <p class="card-text text-muted mb-2">
                                    <span th:text="${bike.engineCc}">объём</span>
                                    <span th:text="#{bike.cc}">куб.см</span>
                                </p>
                                <p class="card-text text-muted small" th:if="${bike.limits != null}">
                                    <!-- Age -->
                                    <span th:text="#{bike.from.age}">от</span>
                                    <span th:text="${bike.limits.ageMin}">16</span>
                                    <span th:text="#{bike.years}">лет</span>
                                    <span th:if="${bike.limits.heightMax != null && bike.limits.heightMax > 0}">
                                        | <span th:text="#{bike.height}">рост</span>
                                        <span th:text="${bike.limits.heightMin + '–' + bike.limits.heightMax}">140–155</span> см
                                    </span>
                                    <span th:unless="${bike.limits.heightMax != null && bike.limits.heightMax > 0}">
                                        | <span th:text="#{bike.height}">рост</span>
                                        <span th:text="#{bike.from.age}">от</span>
                                        <span th:text="${bike.limits.heightMin}">165</span> см
                                    </span>
                                    <br>
                                    <span th:if="${bike.limits.onlyMen}">
                                        <span th:text="#{bike.only.men}">только для мужчин</span>
                                    </span>
                                    <span th:unless="${bike.limits.onlyMen}">
                                        <br>
                                    </span>
                                </p>
                                <span class="badge mt-auto"
                                      th:classappend="${bike.engineCc >= 250} ? 'bg-custom-success' : (${bike.engineCc <= 125} ? 'bg-custom-primary' : 'bg-custom-warning')"
                                      th:text="${bike.engineCc >= 250} ? #{bike.type.enduro} : (${bike.engineCc <= 125} ? #{bike.type.pitbike} : #{bike.type.pitbike})">
                                </span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Navigation buttons -->
                <div class="swiper-button-next"></div>
                <div class="swiper-button-prev"></div>

                <!-- Pagination -->
                <div class="swiper-pagination position-relative pt-5"></div>
            </div>
        </div>
    </section>

    <!-- Routes Section -->
    <section class="py-5">
        <div class="container">
            <div class="text-center mb-5">
                <h2 class="display-6 fw-bold" th:text="#{section.routes.title}">Маршруты</h2>
                <p class="lead text-muted" th:text="#{section.routes.subtitle}">Выберите свое приключение</p>
            </div>

            <!-- Swiper -->
            <div class="swiper routes-swiper">
                <div class="swiper-wrapper">
                    <div class="swiper-slide swiper-autoheight" th:each="route : ${routes}">
                        <div class="card route-card shadow-sm position-relative overflow-hidden">
                            <!-- Route Image -->
                            <div class="route-image-container">
                                <img th:src="@{${route.mapPath}}"
                                     alt="Route map"
                                     class="route-image">
                            </div>

                            <!-- Route Info Overlay -->
                            <div class="card-img-overlay d-flex flex-column justify-content-end">
                                <div class="d-flex justify-content-between align-items-center mb-2">
                                    <h5 class="card-title text-muted mb-0" th:text="${route.difficultyDisplayName}">Легкий</h5>
                                    <span class="badge"
                                          th:classappend="${route.difficulty.value == 1} ? 'bg-success' : (${route.difficulty.value == 2} ? 'bg-warning text-dark' : (${route.difficulty.value == 3} ? 'bg-info' : 'bg-danger'))"
                                          th:text="${route.distance + ' км'}">15 км</span>
                                </div>
                                <p class="card-text text-muted">
                                    <span th:text="#{route.from}">от</span>
                                    <span th:text="${route.price}">50</span>
                                    <span th:text="#{route.currency}">₽</span>
                                </p>

                                <!-- Tooltip trigger with full description -->
                                <div class="mt-1" th:if="${route.description != null}">
                                    <a href="javascript:void(0)"
                                       class="text-muted small route-desc-tip"
                                       data-bs-toggle="tooltip"
                                       data-bs-placement="top"
                                       data-bs-html="true"
                                       th:attr="title=${route.description}">
                                        <i class="fas fa-info-circle me-1"></i>
                                        <span th:text="#{route.description}">Описание маршрута</span>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Navigation buttons -->
                <div class="swiper-button-next"></div>
                <div class="swiper-button-prev"></div>

                <!-- Pagination -->
                <div class="swiper-pagination position-relative pt-2"></div>
            </div>
        </div>
    </section>

    <!-- Info Sections -->
    <section class="py-5 bg-light">
        <div class="container">
            <div class="row g-5">
                <!-- Age Restrictions -->
                <div class="col-lg-6">
                    <div class="info-block h-100">
                        <div class="text-center mb-4">
                            <i class="fas fa-users fa-3x text-primary mb-3"></i>
                            <h3 th:text="#{section.age.title}">Возрастные ограничения</h3>
                        </div>
                        <p class="text-muted" th:text="#{section.age.text}">
                            Принимаем участников от 12 лет. Для детей до 16 лет обязательно присутствие взрослого.
                        </p>
                    </div>
                </div>

                <!-- Equipment -->
                <div class="col-lg-6">
                    <div class="info-block h-100">
                        <div class="text-center mb-4">
                            <i class="fas fa-list-check fa-3x text-primary mb-3"></i>
                            <h3 th:text="#{section.equipment.title}">Что взять с собой</h3>
                        </div>
                        <ul class="list-unstyled">
                            <li class="mb-2">
                                <i class="fas fa-check text-success me-2"></i>
                                <span th:text="#{equipment.clothes}">Спортивная одежда</span>
                            </li>
                            <li class="mb-2">
                                <i class="fas fa-check text-success me-2"></i>
                                <span th:text="#{equipment.shoes}">Закрытая обувь</span>
                            </li>
                            <li class="mb-2">
                                <i class="fas fa-check text-success me-2"></i>
                                <span th:text="#{equipment.gloves}">Перчатки (по желанию)</span>
                            </li>
                            <li class="mb-2">
                                <i class="fas fa-check text-success me-2"></i>
                                <span th:text="#{equipment.water}">Питьевая вода</span>
                            </li>
                            <li class="mb-2">
                                <i class="fas fa-check text-success me-2"></i>
                                <span th:text="#{equipment.snack}">Легкий перекус</span>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Location Section -->
    <section class="py-5">
        <div class="container">
            <div class="text-center">
                <i class="fas fa-map-marker-alt fa-3x text-primary mb-3"></i>
                <h3 class="mb-3" th:text="#{section.location.title}">Где мы находимся</h3>
                <p class="text-muted mb-4" th:text="#{section.location.address}">г. Владикавказ, ул. Примерная, 123</p>
                <a href="https://go.2gis.com/lVIE6" target="_blank" class="btn btn-outline-primary">
                    <i class="fas fa-external-link-alt me-2"></i>
                    <span th:text="#{section.location.cta}">Открыть в 2ГИС</span>
                </a>
            </div>
        </div>
    </section>
</div>

</html>